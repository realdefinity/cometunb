#game-root {
    position: relative; width: 100%; height: 100%;
    /* Default Windowed State */
    max-width: 520px; max-height: 920px;
    display: flex; flex-direction: column; overflow: hidden;
    box-shadow: 0 0 120px rgba(0, 243, 255, 0.08);
    transition: all 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
}

@media (min-width: 520px) {
    #game-root {
        height: 95vh;
        border-radius: 32px;
        border: 2px solid var(--border);
        background: rgba(0,0,0,0.3);
    }
}

/* Immersive Override */
#game-root.immersive {
    max-width: none;
    max-height: none;
    width: 100vw;
    height: 100vh;
    border: none;
    border-radius: 0;
    box-shadow: none;
    background: transparent;
}

#world { width: 100%; height: 100%; display: block; cursor: none; }

.danger-line {
    position: absolute; top: 160px; left: 0; width: 100%; height: 2px;
    background: repeating-linear-gradient(90deg, #ef4444 0, #ef4444 10px, transparent 10px, transparent 20px);
    opacity: 0; pointer-events: none; transition: opacity 0.3s;
    box-shadow: 0 0 20px #ef4444; z-index: 5;
}
.danger-line.active { opacity: 1; animation: pulseRed 0.5s infinite alternate; }
@keyframes pulseRed { 0%{ opacity: 0.3 } 100%{ opacity: 1 } }

.shake-screen { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
@keyframes shake {
    10%, 90% { transform: translate(-3px, 1px) }
    20%, 80% { transform: translate(3px, -1px) }
    30%, 50%, 70% { transform: translate(-5px, 0) }
    40%, 60% { transform: translate(5px, 0) }
}

#cursor-guide {
    position: absolute; top: 0; left: 0; width: 1px; height: 100%;
    background: linear-gradient(to bottom, rgba(255,255,255,0.4), transparent);
    pointer-events: none; z-index: 10; opacity: 0; transition: opacity 0.2s;
}