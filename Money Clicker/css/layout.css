/* --- NUCLEAR SCREEN LOCK --- */
/* This forces the layout to touch all 4 corners of the screen exactly */
.layout { 
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    
    display: flex; 
    z-index: 10; 
    padding: 20px; 
    gap: 20px;
    
    /* Ensure nothing ever spills out */
    overflow: hidden;
}

/* --- THE GLASS PANELS --- */
.panel-left, .panel-right {
    background: var(--glass-surface);
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    border: 1px solid var(--glass-border);
    border-radius: 24px;
    display: flex; 
    flex-direction: column; 
    z-index: 20;
    box-shadow: 0 20px 50px rgba(0,0,0,0.5);
    
    /* CRITICAL: Allow these to shrink if screen is short */
    height: 100%; 
    min-height: 0; 
}

/* Left Panel (Stats) */
.panel-left { 
    width: 320px; 
    padding: 24px; 
    overflow-y: auto; /* Internal scroll if screen is tiny */
}
.panel-left::-webkit-scrollbar { width: 0px; } /* Hide scrollbar */

/* Right Panel (Shop) */
.panel-right { 
    width: 420px; 
    min-width: 300px;
}

/* --- CENTER STAGE --- */
.panel-center {
    flex: 1; /* Takes remaining width */
    height: 100%; /* Match height of neighbors */
    min-height: 0; /* Allow shrinking */
    
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    justify-content: center;
    position: relative; 
}

/* --- SHOP SCROLLING FIX --- */
.shop-header {
    padding: 20px 24px;
    border-bottom: 1px solid var(--glass-border);
    background: rgba(255,255,255,0.02);
    flex-shrink: 0; /* Lock header height */
}

.shop-list { 
    flex: 1; /* Fill remaining vertical space */
    overflow-y: auto; /* Scroll ONLY inside this box */
    padding: 16px;
    overscroll-behavior: contain; /* Stop parent scroll */
}

/* Custom Scrollbar */
.shop-list::-webkit-scrollbar { width: 5px; }
.shop-list::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 4px; }
.shop-list::-webkit-scrollbar-track { background: transparent; }


/* --- MOBILE / TABLET OVERRIDE --- */
/* Trigger this if screen is narrow OR if height is very short */
@media (max-width: 1000px), (max-height: 600px) {
    .layout {
        position: fixed; /* Lock to window */
        flex-direction: column;
        padding: 10px;
        gap: 10px;
        overflow-y: auto; /* Allow scrolling the whole page on mobile */
    }
    
    /* Unlock heights for scrolling */
    .panel-left, .panel-right, .panel-center {
        width: 100%;
        height: auto; 
        min-height: auto;
        flex: none; /* Stop flexing */
    }

    /* Mobile Order */
    .panel-center { order: 1; margin-bottom: 20px; margin-top: 40px; }
    .panel-left { order: 2; margin-bottom: 10px; }
    .panel-right { order: 3; height: 500px; } /* Fixed height for shop on mobile */
}