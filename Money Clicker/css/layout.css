/* --- MAIN LAYOUT CONTAINER --- */
.layout { 
    display: flex; 
    width: 100%; 
    height: 100%; 
    position: relative; 
    z-index: 10; 
    padding: 24px; 
    gap: 24px;
    overflow: hidden; /* Critical for keeping UI on screen */
}

/* --- THE GLASS PANELS --- */
.panel-left, .panel-right {
    background: var(--glass-surface);
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    border: 1px solid var(--glass-border);
    border-radius: 24px;
    display: flex; 
    flex-direction: column; 
    z-index: 20;
    box-shadow: 0 20px 50px rgba(0,0,0,0.5);
    
    /* RESCALING LOGIC */
    flex-shrink: 0; 
    max-height: 100%; 
}

.panel-left { 
    width: 320px; 
    padding: 24px; 
    overflow-y: auto; /* Allow scrolling if screen is tiny */
}
/* Hide scrollbar on left panel */
.panel-left::-webkit-scrollbar { width: 0px; }

.panel-right { 
    width: 420px; 
    min-width: 300px;
}

/* --- CENTER STAGE --- */
.panel-center {
    flex: 1; /* Takes all remaining space */
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    justify-content: center;
    position: relative; 
    min-width: 0; /* Prevents flexbox blowout */
}

/* --- SCROLLABLE SHOP AREA --- */
.shop-header {
    padding: 20px 24px;
    border-bottom: 1px solid var(--glass-border);
    background: rgba(255,255,255,0.02);
    flex-shrink: 0; /* Header stays fixed */
}

.shop-list { 
    flex: 1; /* Fills remaining height */
    overflow-y: auto; /* Scrolls internally */
    padding: 16px;
    min-height: 0; /* Firefox fix */
}

/* Custom Scrollbar for Shop */
.shop-list::-webkit-scrollbar { width: 6px; }
.shop-list::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.15); border-radius: 4px; }
.shop-list::-webkit-scrollbar-track { background: transparent; }


/* --- TABLET / MOBILE MODE --- */
@media (max-width: 1100px) {
    .layout {
        flex-direction: column;
        overflow-y: auto; /* Enable page scroll */
        height: auto;
        min-height: 100vh;
        padding: 16px;
    }
    
    .panel-left, .panel-right, .panel-center {
        width: 100%;
        height: auto;
        max-height: none;
        flex: none;
    }
    
    /* Order: Game first, then Stats, then Shop */
    .panel-center { order: 1; height: 50vh; min-height: 400px; margin-bottom: 20px;} 
    .panel-left { order: 2; margin-bottom: 20px; }
    .panel-right { order: 3; height: 600px; }
}